---
title: Fedora Core 5 引发的血案
author: kxn
type: post
date: 2006-04-23T13:55:54+00:00
url: /post/107.html
views:
  - 3110
categories:
  - Network
  - Tech Notes
---

最近网络上面到处都是血案，我这里也出了一桩。

我的机器一直用的是 FC 系列，自己已经习惯 Redhat 系列发行版了，也懒得换。每次新系统出来的时候，我都顺手 yum 升级上去。感觉不比 debian 的 apt 差太多。FC5 出来以后我又照常 yum 上去了，没想到这将会是一系列恶梦的开端。

4 月某个时间，学校里面停了一次电，来电以后我的机器就连不上了。和 youngcow 还有 trueice 一起去机房看了一眼，它运行的好好的，登录进去看看，路由什么的都对，ping 哪里都不通，连 arp 都无法获得。停掉 iptables ，问题依旧，甚至开始怀疑网线有问题，把网线也换了一根。结果全都不好用。而且 ifconfig 是可以看到网卡收到包的，但是就是没有进入协议栈。最后是灵机一动，把 kernel 命令行上面的 selinux=0 去掉，发现就忽然什么问题都没有了。于是大骂一通 FC5 开发者的变态然后回家。

如果事情发展到这里就结束了，那么也称不上血案。我回到家一连，发现还是连不上。于是很郁闷的给 youngcow 发短信，约过几天再去机房看，这次它是彻底 panic 掉了。重启之后还没怎么操作就又 panic 一下，看调用栈是在 via_rhine 里面，这个是机器上面一块闲置网卡的驱动，并没有接线。再次重启，在 panic 之前卸载 via_rhine 模块，修改 modprobe.conf 让它不要加载这个网卡。这次看起来似乎安全了，再次收工回家。

对，事情和你猜的一样，到这里还没有结束，回去路上顺手用手机连了一下，发现还是无法连接，彻底晕菜。决定买台机器装个新系统换掉这位大爷了。这次隔了一周多才过去，买好了机器，打算去把硬盘拆回来整理整理。在机房里面发现机器运行的好好的，并没有 panic，就顺手搞了两下，把网卡换了一块，网线换了一下。没有想到的是奇迹出现了，一切都变得非常正常。。。

于是 FC5 引发的血案到这里就收场了，虽然直到最后我也没有搞明白到底是什么地方出了问题：我自己新装了一个 FC5，发现即使给 kernel 加上 selinux=0 ，系统网络也可以正常使用；换回来的 3com 905b 在新买的机器上面也非常正常；机房的网线在第一次时候和 youngcow 对换过，在最后搞定那次又换回来了，也就是说网线也没有动。那么到底是什么东西出问题了呢？恐怕只有我的 RP 了吧。ft. 这个血案最终造成的影响是我多买了台机器，把我珍藏的 Intel e100 网卡给用掉了。当然，还有我的机器当了半个多月。。

PS: 后来发现机器也不算太白买，老爸那台机器的声卡烧掉了，周围找不到能用的声卡，于是干脆把新买的机器(P4 2.8C + Intel 865GV + 1G RAM)给老爸用了。早知道是这样就不买 P4 2.8C 了，不如买只赛羊，省电还不吵。
